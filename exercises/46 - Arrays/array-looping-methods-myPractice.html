<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>

  </title>
  <link rel="stylesheet" href="../../base.css">
</head>

<body>
  <script>
    const toppings = [
      'Mushrooms ',
      'Tomatoes',
      'Eggs',
      'Chili',
      'Lettuce',
      'Avocado',
      'Chiles',
      'Bacon',
      'Pickles',
      'Onions',
      'Cheese',
    ];

    const students = [
      {
        id: '11ce',
        first_name: 'Dall',
        last_name: 'Puckring',
      },
      {
        id: '2958',
        first_name: 'Margarete',
        last_name: 'Brandi',
      },
      {
        id: '565a',
        first_name: 'Bendicty',
        last_name: 'Woodage',
      },
      {
        id: '3a16',
        first_name: 'Micki',
        last_name: 'Mattes',
      },
      {
        id: 'f396',
        first_name: 'Flory',
        last_name: 'Gladeche',
      },
      {
        id: 'de5f',
        first_name: 'Jamill',
        last_name: 'Emilien',
      },
      {
        id: '54cb',
        first_name: 'Brett',
        last_name: 'Aizikowitz',
      },
      {
        id: '9135',
        first_name: 'Lorry',
        last_name: 'Smallman',
      },
      {
        id: '978f',
        first_name: 'Gilly',
        last_name: 'Flott',
      },
    ];

    const people = [
      {
        birthday: 'April 22, 1993',
        names: {
          first: 'Keith',
          last: 'Buckley',
        },
      },
      {
        birthday: 'January 3, 1975',
        names: {
          first: 'Larry',
          last: 'Heep',
        },
      },
      {
        birthday: 'February 12, 1944',
        names: {
          first: 'Linda',
          last: 'Bermeer',
        },
      },
    ];

    const buns = ['egg', 'wonder', 'brioche'];

    const meats = {
      beyond: 10,
      beef: 5,
      pork: 7,
    };

    const prices = {
      hotDog: 453,
      burger: 765,
      sausage: 634,
      corn: 234,
    };

    const orderTotals = [342, 1002, 523, 34, 634, 854, 1644, 2222];

    const feedback = [
      { comment: 'Love the burgs', rating: 4 },
      { comment: 'Horrible Service', rating: 2 },
      { comment: 'Smoothies are great, liked the burger too', rating: 5 },
      { comment: 'Ambiance needs work', rating: 3 },
      { comment: 'I DONT LIKE BURGERS', rating: 1 },
    ];

    const faces = ['😃', '🤠', '🤡', '🤑', '😵', '🌞', '🐶', '😺'];

    const inventory = [
      { type: 'shirt', price: 4000 },
      { type: 'pants', price: 4532 },
      { type: 'socks', price: 234 },
      { type: 'shirt', price: 2343 },
      { type: 'pants', price: 2343 },
      { type: 'socks', price: 542 },
      { type: 'pants', price: 123 },
    ];

    /*
      Looping Methods

      Many array methods take a callback function as an argument. The callback function is called sequentially and at most once for each element in the array.

      The callback function will run once for every element in the array. Giving access to each individual element.
    */

    /*
    `forEach()` is used to iterate over an array and execute a given callback
    function for each element in the array.

    Syntax: `array.forEach(callback(element, [index], [array]), [thisArg]);`

    Notes:
    `forEach()` doesn’t return a value; it’s purely for performing side effects
    (e.g., logging, modifying elements, etc.).

    It runs the callback function on every element in the array, including
    undefined values, but it skips empty elements (i.e., array "holes").

    It doesn't modify the original array.

    Best use case: logging value, attaching an event listener - known as side effects 
    Side effects are when you reach outside a function to do something else
    */

    // Example passing in a function
    function logTopping(item, index, array) {
      console.log(item, index, array);
    }

    toppings.forEach(logTopping);

    // Arrow function as callback example
    console.log(toppings.forEach(item => console.log(item)));

    // Example of using the original array and index arguments
    function logTopping2(item, index, array) {
      console.log('<------------Start------------------>');
      // Log the topping
      console.log(item);

      // Log the next topping if there is one
      console.log(array[index + 1]);

      // Log the previous topping if there is one
      console.log(array[index - 1]);

      // When last topping is reached, say goodbye
      if (index === array.length - 1) console.log('Goodbye!');
      // index === array.length - 1 ? console.log('Goodbye!') : null;

      console.log('<------------End-------------------->');
    }

    toppings.forEach(logTopping2);

    // Wes' solution - removes the undefined
    function logTopping3(item, index, array) {
      const nextTopping = array[index + 1];
      const previousTopping = array[index - 1];

      // Log the topping
      console.log(item);

      // Log the next topping if there is one
      nextTopping ? console.log(nextTopping) : null;

      // Log the previous topping if there is one
      previousTopping ? console.log(previousTopping) : null;

      // When last topping is reached, say goodbye
      index === array.length - 1
        ? console.log('Goodbye!')
        : console.log('Getting the next topping.');

      console.log('-------------------------------');
    }

    toppings.forEach(logTopping3);

    /*

    MAP, FILTER, REDUCE

    */

    /*

    `map()` is a method that creates a new array by applying a callback
    function to each element of an existing array. It's useful for transforming
    or modifying elements without changing the original array.

    Syntax: `let newArray = array.map(callback(element, [index], [array]), [thisArg]);`
    
    */

    // Doubling numbers example
    const nums = [4, 5, 7, 9, 12];

    const doubled = nums.map(num => num * 2);

    console.log(doubled); // (5) [8, 10, 14, 18, 24]
    console.log(nums); // (5) [4, 5, 7, 9, 12]

    // Wes' example of `.map()`
    function addArms(face) {
      return `👋 ${face} 👋`;
    }

    const armsFaces = faces.map(addArms);
    console.log(armsFaces);

    // Create full names
    const fullNames = ['Han', 'Leia', 'Ben'].map(name => `${name} Solo`);
    console.log(fullNames); // (3) ['Han Solo', 'Leia Solo', 'Ben Solo']

    // Multiple functions and chaining `.map()`
    function urbify(name) {
      return `${name} Urban`;
    }

    function capitalize(word) {
      return `${word[0].toUpperCase()}${word.slice(1)}`;
    }

    const urbans = ['steve', 'betty', 'wyatt'].map(capitalize).map(urbify);

    console.log(urbans); // (3) ['Steve Urban', 'Betty Urban', 'Wyatt Urban']

    // Adding sales tax to `orderTotals` array
    const itemsPlusTax = orderTotals.map(
      amount => amount + Math.floor(amount * 0.06)
    );
    console.log(itemsPlusTax);

    // Fun example - introduces `.repeat()` and `.fill()`
    /* eslint-disable */
    function attachBody(face, body) {
      return `
            ${face}
          ${body.repeat(3)}
         ${Array(3).fill(body).join(' ')}
      👇   ${body.repeat(2)}  👇
          ${Array(2).fill(body).join('   ')}
          ${Array(2).fill(body).join('   ')}
          👢   👢
      `;
    }

    faces.map(face => attachBody(face, '🎾')).forEach(body => console.log(body));

    /* eslint-enable */

    // Note: never update the DOM with a map() method, use forEach() for that

    // Example of taking in an object and manipulating "massaging" the data  to
    // eliminate unnecessary information from data or cleaning a dataset to make it useable
    const cleanPeople = people.map(function (person) {
      // Get their b-day
      // timestamp
      const birthday = new Date(person.birthday).getTime();

      // now timestamp
      const now = Date.now();

      // Calculate their age
      const age = Math.floor((now - birthday) / 31536000000);
      console.log(age);

      // Return their full name and age in an object
      return {
        age,
        name: `${person.names.first} ${person.names.last}`,
      };
    });

    console.table(cleanPeople);

    /*

    `filter()` method of Array instances creates a shallow copy of a portion of a
    given array, filtered down to just the elements from the given array that
    pass the test implemented by the provided function.
    
    `let newArray = array.filter(callback(element, [index], [array]), [thisArg]);`

    `find()` returns the first element that passes the test. As soon as it finds
    a match, it stops checking the rest of the array.

    */

    // Give only even numbers
    const numArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];

    const evenNumsOnly = numArray.filter(num => num % 2 === 0);
    console.log(evenNumsOnly); // (7) [2, 4, 6, 8, 10, 12, 14]

    // Find the first price in `inventory` greater than 3000
    const expensive = inventory.find(item => item.price > 3000);
    console.log(expensive); // {type: 'shirt', price: 4000}

    /*
    filter() returns a new array with all matching elements.
    find() returns the first matching element
    */

    // More examples...

    const over40 = cleanPeople.filter(person => person.age > 40);
    console.log(over40); // returns a new filtered array

    // Find the student with 565a
    const studentID = students.find(student => student.id === '565a');
    console.log(studentID); // returns the student object

    // Passing in a function
    function findById(id) {
      function isStudent(student) {
        return student.id === id;
      }
    }

    const studentId = students.find(findById('f396'));
    console.log(studentId);
  </script>
</body>

</html>