<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Intervals and Timers</title>
  <link rel="stylesheet" href="../base.css">
</head>

<body>
  <script>
    /*
    `setTimeout()`: Executes a function or code snippet after a specified delay.

    Method on the `Window`, global API (so no need to type in `window.`, especially since Node.JS has `setTimeout()` but no `Window`)
  
    Returns a Timeout ID: This ID can be used with `clearTimeout()` to cancel the execution if needed.
  
    Delay: Specified in milliseconds.
  
    Single Execution: Unlike `setInterval()`, `setTimeout()` executes the function only once.
  
    Passing Arguments: Additional arguments can be passed to the function.
  
    Syntax:
    `setTimeout(function(callback), delay(ms), param1, param2, ...);`
    */

    console.log('Wait for it...');

    // Anonymous function with 2 secs delay
    setTimeout(() => {
      console.log('...and finished!!');
    }, 500);

    function sayHi(name) {
      console.log(`Hi, my name is ${name}`);
    }

    // Pass in a reference to a callback function, with 5 secs delay, and the argument for the callback
    setTimeout(sayHi, 5000, 'C3PO');

    /*
    `setInterval()` is used to repeatedly execute a function or code snippet with a fixed time delay between each call.

    It returns an interval ID, which can be used with `clearInterval()` to stop the execution.

    The delay is specified in milliseconds.

    You can pass additional arguments to the function when using `setInterval()`.
    
    Common use cases include animations, periodic data fetching, and updating dynamic content like clocks or timers.
    */

    function alarm() {
      console.log('Beep');
    }

    // setInterval(alarm, 2000);

    // An example of how to have `setInterval` run immediately instead of waiting the initial delay, then continue with the set delay as normal
    function setImmediateInterval(funcToRun, ms) {
      // Call the passed in function right away
      funcToRun();
      // Run the regular interval
      return setInterval(funcToRun, ms);
    }

    setImmediateInterval(alarm, 2000);

    /*
    `clearInterval` is a function in JavaScript used to stop the repeated execution 
    of a function that was started using `setInterval`. When you set an interval with `setInterval`, it returns a unique interval ID. This ID can then be used with `clearInterval` to cancel the interval.

    Syntax:
    `clearInterval(intervalID);`

    */

    function destroy() {
      document.body.innerHTML = `<p>DESTROYED</p>`;
    }
    // Save reference to this timer number in a variable
    const bombTimer = setTimeout(destroy, 5000);

    console.log(bombTimer); // 4 (this timers number out of all timers running)

    window.addEventListener('click', function () {
      console.log('You clicked! You stopped the destruction!');
      // Stops the timer from running
      clearTimeout(bombTimer);
    });

    // Stopping `setInterval` works in the same way but using `clearInterval`
    const spam = setInterval(() => {
      console.log('SPAM!!');
      console.log('SPAM!!!');
    }, 100);

    setTimeout(() => {
      clearInterval(spam);
    }, 10000);
  </script>
</body>

</html>